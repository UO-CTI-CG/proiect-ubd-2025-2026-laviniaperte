{"ast":null,"code":"import _objectSpread from\"C:/Users/lavin/proiect-ubd-2025-2026-laviniaperte/biblioteca-react/client/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import React,{useEffect,useState}from\"react\";import axios from\"axios\";import{useNavigate}from\"react-router-dom\";import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";export default function AddLoan(){const navigate=useNavigate();const[users,setUsers]=useState([]);const[books,setBooks]=useState([]);const[loan,setLoan]=useState({user_id:\"\",book_id:\"\",date:\"\"});useEffect(()=>{// Prinderea erorilor la preluare date\naxios.get(\"http://127.0.0.1:5000/users\").then(res=>setUsers(res.data)).catch(err=>{console.error(\"Eroare la preluarea utilizatorilor:\",err);alert(\"Nu s-au putut încărca utilizatorii. Verifică serverul.\");});axios.get(\"http://127.0.0.1:5000/books\").then(res=>setBooks(res.data)).catch(err=>{console.error(\"Eroare la preluarea cărților:\",err);alert(\"Nu s-au putut încărca cărțile. Verifică serverul.\");});},[]);const handleSubmit=async e=>{e.preventDefault();try{await axios.post(\"http://127.0.0.1:5000/loans\",loan);navigate(\"/loans\");}catch(error){console.error(\"Eroare la adăugarea împrumutului:\",error);alert(\"Nu s-a putut salva împrumutul. Verifică serverul.\");}};return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h1\",{children:\"Adaug\\u0103 \\xCEmprumut\"}),/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleSubmit,children:[/*#__PURE__*/_jsx(\"label\",{children:\"Utilizator\"}),/*#__PURE__*/_jsxs(\"select\",{value:loan.user_id,onChange:e=>setLoan(_objectSpread(_objectSpread({},loan),{},{user_id:e.target.value})),required:true,children:[/*#__PURE__*/_jsx(\"option\",{value:\"\",children:\"Selecteaz\\u0103 utilizator\"}),users.map(u=>/*#__PURE__*/_jsx(\"option\",{value:u.id,children:u.name},u.id))]}),/*#__PURE__*/_jsx(\"label\",{children:\"Carte\"}),/*#__PURE__*/_jsxs(\"select\",{value:loan.book_id,onChange:e=>setLoan(_objectSpread(_objectSpread({},loan),{},{book_id:e.target.value})),required:true,children:[/*#__PURE__*/_jsx(\"option\",{value:\"\",children:\"Selecteaz\\u0103 carte\"}),books.map(b=>/*#__PURE__*/_jsx(\"option\",{value:b.id,children:b.title},b.id))]}),/*#__PURE__*/_jsx(\"label\",{children:\"Data\"}),/*#__PURE__*/_jsx(\"input\",{type:\"date\",value:loan.date,onChange:e=>setLoan(_objectSpread(_objectSpread({},loan),{},{date:e.target.value})),required:true}),/*#__PURE__*/_jsx(\"button\",{className:\"button\",type:\"submit\",children:\"Salveaz\\u0103\"})]})]});}","map":{"version":3,"names":["React","useEffect","useState","axios","useNavigate","jsx","_jsx","jsxs","_jsxs","AddLoan","navigate","users","setUsers","books","setBooks","loan","setLoan","user_id","book_id","date","get","then","res","data","catch","err","console","error","alert","handleSubmit","e","preventDefault","post","children","onSubmit","value","onChange","_objectSpread","target","required","map","u","id","name","b","title","type","className"],"sources":["C:/Users/lavin/proiect-ubd-2025-2026-laviniaperte/biblioteca-react/client/src/pages/AddLoan.jsx"],"sourcesContent":["import React, { useEffect, useState } from \"react\";\r\nimport axios from \"axios\";\r\nimport { useNavigate } from \"react-router-dom\";\r\n\r\nexport default function AddLoan() {\r\n  const navigate = useNavigate();\r\n  const [users, setUsers] = useState([]);\r\n  const [books, setBooks] = useState([]);\r\n\r\n  const [loan, setLoan] = useState({\r\n    user_id: \"\",\r\n    book_id: \"\",\r\n    date: \"\"\r\n  });\r\n\r\n  useEffect(() => {\r\n    // Prinderea erorilor la preluare date\r\n    axios.get(\"http://127.0.0.1:5000/users\")\r\n      .then(res => setUsers(res.data))\r\n      .catch(err => {\r\n        console.error(\"Eroare la preluarea utilizatorilor:\", err);\r\n        alert(\"Nu s-au putut încărca utilizatorii. Verifică serverul.\");\r\n      });\r\n\r\n    axios.get(\"http://127.0.0.1:5000/books\")\r\n      .then(res => setBooks(res.data))\r\n      .catch(err => {\r\n        console.error(\"Eroare la preluarea cărților:\", err);\r\n        alert(\"Nu s-au putut încărca cărțile. Verifică serverul.\");\r\n      });\r\n  }, []);\r\n\r\n  const handleSubmit = async (e) => {\r\n    e.preventDefault();\r\n\r\n    try {\r\n      await axios.post(\"http://127.0.0.1:5000/loans\", loan);\r\n      navigate(\"/loans\");\r\n    } catch (error) {\r\n      console.error(\"Eroare la adăugarea împrumutului:\", error);\r\n      alert(\"Nu s-a putut salva împrumutul. Verifică serverul.\");\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div>\r\n      <h1>Adaugă Împrumut</h1>\r\n\r\n      <form onSubmit={handleSubmit}>\r\n        <label>Utilizator</label>\r\n        <select\r\n          value={loan.user_id}\r\n          onChange={e => setLoan({ ...loan, user_id: e.target.value })}\r\n          required\r\n        >\r\n          <option value=\"\">Selectează utilizator</option>\r\n          {users.map(u => (\r\n            <option key={u.id} value={u.id}>{u.name}</option>\r\n          ))}\r\n        </select>\r\n\r\n        <label>Carte</label>\r\n        <select\r\n          value={loan.book_id}\r\n          onChange={e => setLoan({ ...loan, book_id: e.target.value })}\r\n          required\r\n        >\r\n          <option value=\"\">Selectează carte</option>\r\n          {books.map(b => (\r\n            <option key={b.id} value={b.id}>{b.title}</option>\r\n          ))}\r\n        </select>\r\n\r\n        <label>Data</label>\r\n        <input \r\n          type=\"date\"\r\n          value={loan.date}\r\n          onChange={e => setLoan({ ...loan, date: e.target.value })}\r\n          required\r\n        />\r\n\r\n        <button className=\"button\" type=\"submit\">Salvează</button>\r\n      </form>\r\n    </div>\r\n  );\r\n}\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}