{"ast":null,"code":"import{useEffect,useState}from\"react\";import axios from\"axios\";import\"../styles/library.css\";import{useNavigate}from\"react-router-dom\";import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";export default function BooksList(){const[books,setBooks]=useState([]);const navigate=useNavigate();// Preia cărțile de la backend\nuseEffect(()=>{const fetchBooks=async()=>{try{const res=await axios.get(\"http://127.0.0.1:5000/books\");console.log(\"Cărți primite:\",res.data);// verificare în consolă\nsetBooks(res.data);}catch(err){console.error(\"Eroare la preluarea cărților:\",err);alert(\"Nu s-au putut încărca cărțile. Verifică serverul.\");}};fetchBooks();},[]);// Șterge o carte\nconst deleteBook=async id=>{try{await axios.delete(\"http://127.0.0.1:5000/books/\".concat(id));setBooks(books.filter(book=>book.id!==id));}catch(err){console.error(\"Eroare la ștergerea cărții:\",err);alert(\"Nu s-a putut șterge cartea. Verifică serverul.\");}};return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h1\",{children:\"Lista c\\u0103r\\u021Bilor\"}),/*#__PURE__*/_jsx(\"div\",{style:{textAlign:\"center\",marginBottom:25},children:/*#__PURE__*/_jsx(\"button\",{className:\"button\",onClick:()=>navigate(\"/add-book\"),children:\"Adaug\\u0103 o carte nou\\u0103\"})}),/*#__PURE__*/_jsxs(\"table\",{children:[/*#__PURE__*/_jsx(\"thead\",{children:/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"th\",{children:\"ID\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Titlu\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Autor\"}),/*#__PURE__*/_jsx(\"th\",{children:\"An\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Ac\\u021Biuni\"})]})}),/*#__PURE__*/_jsx(\"tbody\",{children:books.map((book,index)=>/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"td\",{children:index+1}),/*#__PURE__*/_jsx(\"td\",{children:book.title}),/*#__PURE__*/_jsx(\"td\",{children:book.author}),/*#__PURE__*/_jsx(\"td\",{children:book.year}),/*#__PURE__*/_jsxs(\"td\",{children:[/*#__PURE__*/_jsx(\"button\",{className:\"button\",onClick:()=>navigate(\"/edit-book/\".concat(book.id)),children:\"Editare\"}),/*#__PURE__*/_jsx(\"button\",{className:\"button\",style:{backgroundColor:\"#d670ff\"},onClick:()=>deleteBook(book.id),children:\"\\u0218terge\"})]})]},book.id))})]})]});}","map":{"version":3,"names":["useEffect","useState","axios","useNavigate","jsx","_jsx","jsxs","_jsxs","BooksList","books","setBooks","navigate","fetchBooks","res","get","console","log","data","err","error","alert","deleteBook","id","delete","concat","filter","book","children","style","textAlign","marginBottom","className","onClick","map","index","title","author","year","backgroundColor"],"sources":["C:/Users/lavin/proiect-ubd-2025-2026-laviniaperte/biblioteca-react/client/src/pages/BooksList.jsx"],"sourcesContent":["import { useEffect, useState } from \"react\";\r\nimport axios from \"axios\";\r\nimport \"../styles/library.css\";\r\nimport { useNavigate } from \"react-router-dom\";\r\n\r\nexport default function BooksList() {\r\n  const [books, setBooks] = useState([]);\r\n  const navigate = useNavigate();\r\n\r\n  // Preia cărțile de la backend\r\n  useEffect(() => {\r\n    const fetchBooks = async () => {\r\n      try {\r\n        const res = await axios.get(\"http://127.0.0.1:5000/books\");\r\n        console.log(\"Cărți primite:\", res.data); // verificare în consolă\r\n        setBooks(res.data);\r\n      } catch (err) {\r\n        console.error(\"Eroare la preluarea cărților:\", err);\r\n        alert(\"Nu s-au putut încărca cărțile. Verifică serverul.\");\r\n      }\r\n    };\r\n    fetchBooks();\r\n  }, []);\r\n\r\n  // Șterge o carte\r\n  const deleteBook = async (id) => {\r\n    try {\r\n      await axios.delete(`http://127.0.0.1:5000/books/${id}`);\r\n      setBooks(books.filter((book) => book.id !== id));\r\n    } catch (err) {\r\n      console.error(\"Eroare la ștergerea cărții:\", err);\r\n      alert(\"Nu s-a putut șterge cartea. Verifică serverul.\");\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div>\r\n      <h1>Lista cărților</h1>\r\n\r\n      <div style={{ textAlign: \"center\", marginBottom: 25 }}>\r\n        <button className=\"button\" onClick={() => navigate(\"/add-book\")}>\r\n          Adaugă o carte nouă\r\n        </button>\r\n      </div>\r\n\r\n      <table>\r\n        <thead>\r\n          <tr>\r\n            <th>ID</th>\r\n            <th>Titlu</th>\r\n            <th>Autor</th>\r\n            <th>An</th>\r\n            <th>Acțiuni</th>\r\n          </tr>\r\n        </thead>\r\n        <tbody>\r\n          {books.map((book, index) => (\r\n            <tr key={book.id}>\r\n              <td>{index + 1}</td>\r\n              <td>{book.title}</td>\r\n              <td>{book.author}</td>\r\n              <td>{book.year}</td>\r\n              <td>\r\n                <button\r\n                  className=\"button\"\r\n                  onClick={() => navigate(`/edit-book/${book.id}`)}\r\n                >\r\n                  Editare\r\n                </button>\r\n                <button\r\n                  className=\"button\"\r\n                  style={{ backgroundColor: \"#d670ff\" }}\r\n                  onClick={() => deleteBook(book.id)}\r\n                >\r\n                  Șterge\r\n                </button>\r\n              </td>\r\n            </tr>\r\n          ))}\r\n        </tbody>\r\n      </table>\r\n    </div>\r\n  );\r\n}\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}